

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Function Reference &mdash; ndmg 0.1.1 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
        <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Diffusion Pipeline" href="../pipeline/diffusion.html" />
    <link rel="prev" title="Install" href="install.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> ndmg
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Tutorials</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="install.html">Install</a><ul>
<li class="toctree-l2"><a class="reference internal" href="install.html#summary">Summary</a></li>
<li class="toctree-l2"><a class="reference internal" href="install.html#system-requirements">System Requirements</a></li>
<li class="toctree-l2"><a class="reference internal" href="install.html#installation-guide">Installation Guide</a><ul>
<li class="toctree-l3"><a class="reference internal" href="install.html#docker">Docker</a></li>
<li class="toctree-l3"><a class="reference internal" href="install.html#pip">Pip</a></li>
<li class="toctree-l3"><a class="reference internal" href="install.html#github">Github</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Function Reference</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#module-utils.bids_utils">bids_utils</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-graph.gen_graph">gen_graph</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-register.gen_reg">gen_reg</a></li>
<li class="toctree-l2"><a class="reference internal" href="#gen-track">gen_track</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-utils.gen_utils">gen_utils</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-utils.loadGraphs">loadGraphs</a></li>
<li class="toctree-l2"><a class="reference internal" href="#mri-autoingest">mri_autoingest</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-scripts.multigraph_pipeline">multigraph_pipeline</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-scripts.ndmg_bids">ndmg_bids</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-scripts.ndmg_cloud">ndmg_cloud</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-scripts.ndmg_dwi_pipeline">ndmg_dwi_pipeline</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-scripts.ndmg_setup">ndmg_setup</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-utils.nifti_to_binary">nifti_to_binary</a></li>
<li class="toctree-l2"><a class="reference internal" href="#nifti-to-png">nifti_to_png</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-stats.plotly_helper">plotly_helper</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-preproc.preproc_anat">preproc_anat</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-stats.qa_adjacency">qa_adjacency</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-stats.qa_fibers">qa_fibers</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-stats.qa_graphs">qa_graphs</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-stats.qa_tensor">qa_tensor</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-utils.reg_utils">reg_utils</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-preproc.rescale_bvec">rescale_bvec</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-utils.s3_utils">s3_utils</a><ul class="simple">
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Pipeline Overview</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../pipeline/diffusion.html">Diffusion Pipeline</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../pipeline/diffusion.html#output-summary-table">Output Summary Table</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pipeline/diffusion.html#output-subject-level-pipeline-summary">Output subject-level pipeline summary</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pipeline/diffusion.html#registration">Registration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pipeline/diffusion.html#tensor-estimation">Tensor Estimation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pipeline/diffusion.html#tractography">Tractography</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pipeline/diffusion.html#graph-estimation">Graph Estimation</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../pipeline/functional.html">Functional Pipeline</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">ndmg</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
      <li>Function Reference</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/tutorials/funcref.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="function-reference">
<h1><a class="toc-backref" href="#id3">Function Reference</a><a class="headerlink" href="#function-reference" title="Permalink to this headline">¶</a></h1>
<div class="contents topic" id="table-of-contents">
<p class="topic-title first">Table of Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#function-reference" id="id3">Function Reference</a><ul>
<li><a class="reference internal" href="#module-utils.bids_utils" id="id4">bids_utils</a></li>
<li><a class="reference internal" href="#module-graph.gen_graph" id="id5">gen_graph</a></li>
<li><a class="reference internal" href="#module-register.gen_reg" id="id6">gen_reg</a></li>
<li><a class="reference internal" href="#gen-track" id="id7">gen_track</a></li>
<li><a class="reference internal" href="#module-utils.gen_utils" id="id8">gen_utils</a></li>
<li><a class="reference internal" href="#module-utils.loadGraphs" id="id9">loadGraphs</a></li>
<li><a class="reference internal" href="#mri-autoingest" id="id10">mri_autoingest</a></li>
<li><a class="reference internal" href="#module-scripts.multigraph_pipeline" id="id11">multigraph_pipeline</a></li>
<li><a class="reference internal" href="#module-scripts.ndmg_bids" id="id12">ndmg_bids</a></li>
<li><a class="reference internal" href="#module-scripts.ndmg_cloud" id="id13">ndmg_cloud</a></li>
<li><a class="reference internal" href="#module-scripts.ndmg_dwi_pipeline" id="id14">ndmg_dwi_pipeline</a></li>
<li><a class="reference internal" href="#module-scripts.ndmg_setup" id="id15">ndmg_setup</a></li>
<li><a class="reference internal" href="#module-utils.nifti_to_binary" id="id16">nifti_to_binary</a></li>
<li><a class="reference internal" href="#nifti-to-png" id="id17">nifti_to_png</a></li>
<li><a class="reference internal" href="#module-stats.plotly_helper" id="id18">plotly_helper</a></li>
<li><a class="reference internal" href="#module-preproc.preproc_anat" id="id19">preproc_anat</a></li>
<li><a class="reference internal" href="#module-stats.qa_adjacency" id="id20">qa_adjacency</a></li>
<li><a class="reference internal" href="#module-stats.qa_fibers" id="id21">qa_fibers</a></li>
<li><a class="reference internal" href="#module-stats.qa_graphs" id="id22">qa_graphs</a></li>
<li><a class="reference internal" href="#module-stats.qa_tensor" id="id23">qa_tensor</a></li>
<li><a class="reference internal" href="#module-utils.reg_utils" id="id24">reg_utils</a></li>
<li><a class="reference internal" href="#module-preproc.rescale_bvec" id="id25">rescale_bvec</a></li>
<li><a class="reference internal" href="#module-utils.s3_utils" id="id26">s3_utils</a></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="module-utils.bids_utils">
<span id="bids-utils"></span><h2><a class="toc-backref" href="#id4">bids_utils</a><a class="headerlink" href="#module-utils.bids_utils" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="utils.bids_utils.as_list">
<code class="descclassname">utils.bids_utils.</code><code class="descname">as_list</code><span class="sig-paren">(</span><em>x</em><span class="sig-paren">)</span><a class="headerlink" href="#utils.bids_utils.as_list" title="Permalink to this definition">¶</a></dt>
<dd><p>A function to convert an item to a list if it is not, or pass it through otherwise</p>
<dl class="docutils">
<dt>x <span class="classifier-delimiter">:</span> <span class="classifier">any object</span></dt>
<dd>anything that can be entered into a list that you want to be converted into a list</dd>
</dl>
<dl class="docutils">
<dt>list</dt>
<dd>a list containing x</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="utils.bids_utils.flatten">
<code class="descclassname">utils.bids_utils.</code><code class="descname">flatten</code><span class="sig-paren">(</span><em>current</em>, <em>result=[]</em><span class="sig-paren">)</span><a class="headerlink" href="#utils.bids_utils.flatten" title="Permalink to this definition">¶</a></dt>
<dd><p>Flatten a folder heirarchy</p>
<dl class="docutils">
<dt>current <span class="classifier-delimiter">:</span> <span class="classifier">dict</span></dt>
<dd>path to directory you want to flatten</dd>
<dt>result <span class="classifier-delimiter">:</span> <span class="classifier">list, optional</span></dt>
<dd>Default is []</dd>
</dl>
<dl class="docutils">
<dt>list</dt>
<dd>All new directories created by flattening the current directory</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="utils.bids_utils.merge_dicts">
<code class="descclassname">utils.bids_utils.</code><code class="descname">merge_dicts</code><span class="sig-paren">(</span><em>x</em>, <em>y</em><span class="sig-paren">)</span><a class="headerlink" href="#utils.bids_utils.merge_dicts" title="Permalink to this definition">¶</a></dt>
<dd><p>A function to merge two dictionaries, making it easier for us to make modality specific queries
for dwi images (since they have variable extensions due to having an nii.gz, bval, and bvec file)</p>
<dl class="docutils">
<dt>x <span class="classifier-delimiter">:</span> <span class="classifier">dict</span></dt>
<dd>dictionary you want merged with y</dd>
<dt>y <span class="classifier-delimiter">:</span> <span class="classifier">dict</span></dt>
<dd>dictionary you want merged with x</dd>
</dl>
<dl class="docutils">
<dt>dict</dt>
<dd>combined dictionary with {x content,y content}</dd>
</dl>
</dd></dl>

<dl class="class">
<dt id="utils.bids_utils.name_resource">
<em class="property">class </em><code class="descclassname">utils.bids_utils.</code><code class="descname">name_resource</code><span class="sig-paren">(</span><em>modf</em>, <em>t1wf</em>, <em>tempf</em>, <em>opath</em><span class="sig-paren">)</span><a class="headerlink" href="#utils.bids_utils.name_resource" title="Permalink to this definition">¶</a></dt>
<dd><p>A class for naming derivatives under the BIDs spec.</p>
<dl class="docutils">
<dt>modf <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd>Path to subject MRI (dwi or func) data to be analyzed</dd>
<dt>t1wf <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd>Path to subject t1w anatomical data</dd>
<dt>tempf <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd>Path to atlas file(s) to be used during analysis</dd>
<dt>opath <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd>Path to output directory</dd>
</dl>
<dl class="method">
<dt id="utils.bids_utils.name_resource.add_dirs">
<code class="descname">add_dirs</code><span class="sig-paren">(</span><em>paths</em>, <em>labels</em>, <em>label_dirs</em><span class="sig-paren">)</span><a class="headerlink" href="#utils.bids_utils.name_resource.add_dirs" title="Permalink to this definition">¶</a></dt>
<dd><p>creates tmp and permanent directories for the desired suffixes.</p>
<dl class="docutils">
<dt><a href="#id1"><span class="problematic" id="id2">**</span></a>Positional Arguments:</dt>
<dd><ul class="first last simple">
<li><dl class="first docutils">
<dt>paths:</dt>
<dd><ul class="first last">
<li>a dictionary of keys to suffix directories desired.</li>
</ul>
</dd>
</dl>
</li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="utils.bids_utils.name_resource.add_dirs_dwi">
<code class="descname">add_dirs_dwi</code><span class="sig-paren">(</span><em>paths</em>, <em>labels</em>, <em>label_dirs</em><span class="sig-paren">)</span><a class="headerlink" href="#utils.bids_utils.name_resource.add_dirs_dwi" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates tmp and permanent directories for the desired suffixes</p>
<dl class="docutils">
<dt>namer <span class="classifier-delimiter">:</span> <span class="classifier">name_resource</span></dt>
<dd>varibale of the name_resource class created by name_resource() containing path and settings information for the desired run. It includes: subject, anatomical scan, session, run number, task, resolution, output directory</dd>
<dt>paths <span class="classifier-delimiter">:</span> <span class="classifier">dict</span></dt>
<dd>a dictionary of keys to suffix directories</dd>
<dt>labels <span class="classifier-delimiter">:</span> <span class="classifier">list</span></dt>
<dd>path to desired atlas labeling file</dd>
<dt>label_dirs <span class="classifier-delimiter">:</span> <span class="classifier">list</span></dt>
<dd>label directories</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="utils.bids_utils.name_resource.get_label">
<code class="descname">get_label</code><span class="sig-paren">(</span><em>label</em><span class="sig-paren">)</span><a class="headerlink" href="#utils.bids_utils.name_resource.get_label" title="Permalink to this definition">¶</a></dt>
<dd><p>return the formatted label information for the parcellation.</p>
</dd></dl>

<dl class="method">
<dt id="utils.bids_utils.name_resource.get_outdir">
<code class="descname">get_outdir</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#utils.bids_utils.name_resource.get_outdir" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the base output directory for a particular subject and appropriate granularity.</p>
<dl class="docutils">
<dt>str</dt>
<dd>output directory</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="utils.bids_utils.name_resource.get_template_info">
<code class="descname">get_template_info</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#utils.bids_utils.name_resource.get_template_info" title="Permalink to this definition">¶</a></dt>
<dd><p>returns the formatted spatial information associated with a template.-</p>
</dd></dl>

<dl class="method">
<dt id="utils.bids_utils.name_resource.name_derivative">
<code class="descname">name_derivative</code><span class="sig-paren">(</span><em>folder</em>, <em>derivative</em><span class="sig-paren">)</span><a class="headerlink" href="#utils.bids_utils.name_resource.name_derivative" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates derivative output file paths using os.path.join</p>
<dl class="docutils">
<dt>folder <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd>Path of directory that you want the derivative file name appended too</dd>
<dt>derivative <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd>The name of the file to be produced</dd>
</dl>
<dl class="docutils">
<dt>str</dt>
<dd>Derivative output file path</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="utils.bids_utils.sweep_directory">
<code class="descclassname">utils.bids_utils.</code><code class="descname">sweep_directory</code><span class="sig-paren">(</span><em>bdir</em>, <em>subj=None</em>, <em>sesh=None</em>, <em>task=None</em>, <em>run=None</em>, <em>modality='dwi'</em><span class="sig-paren">)</span><a class="headerlink" href="#utils.bids_utils.sweep_directory" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a BIDs formatted directory, crawls the BIDs dir and prepares the necessary inputs for the NDMG pipeline. Uses regexes to check matches for BIDs compliance.</p>
<dl class="docutils">
<dt>bdir <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd>input directory</dd>
<dt>subj <span class="classifier-delimiter">:</span> <span class="classifier">list, optional</span></dt>
<dd>subject label. Default = None</dd>
<dt>sesh <span class="classifier-delimiter">:</span> <span class="classifier">list, optional</span></dt>
<dd>session label. Default = None</dd>
<dt>task <span class="classifier-delimiter">:</span> <span class="classifier">list, optional</span></dt>
<dd>task label. Default = None</dd>
<dt>run <span class="classifier-delimiter">:</span> <span class="classifier">list, optional</span></dt>
<dd>run label. Default = None</dd>
<dt>modality <span class="classifier-delimiter">:</span> <span class="classifier">str, optional</span></dt>
<dd>Data type being analyzed. Default = “dwi”</dd>
</dl>
<dl class="docutils">
<dt>tuple</dt>
<dd>contining location of dwi, bval, bvec, and anat</dd>
</dl>
<dl class="docutils">
<dt>ValueError</dt>
<dd>Raised if incorrect mobility passed</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-graph.gen_graph">
<span id="gen-graph"></span><h2><a class="toc-backref" href="#id5">gen_graph</a><a class="headerlink" href="#module-graph.gen_graph" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="graph.gen_graph.get_sphere">
<code class="descclassname">graph.gen_graph.</code><code class="descname">get_sphere</code><span class="sig-paren">(</span><em>coords</em>, <em>r</em>, <em>vox_dims</em>, <em>dims</em><span class="sig-paren">)</span><a class="headerlink" href="#graph.gen_graph.get_sphere" title="Permalink to this definition">¶</a></dt>
<dd><p>Return all points within r mm of coords. Generates a cube and then discards all points outside sphere.</p>
<dl class="docutils">
<dt>coords <span class="classifier-delimiter">:</span> <span class="classifier">list</span></dt>
<dd>List of (x, y, z) tuples corresponding to a coordinate atlas used or
which represent the center-of-mass of each parcellation node.</dd>
<dt>r <span class="classifier-delimiter">:</span> <span class="classifier">int</span></dt>
<dd>Radius for sphere.</dd>
<dt>vox_dims <span class="classifier-delimiter">:</span> <span class="classifier">array/tuple</span></dt>
<dd>1D vector (x, y, z) of mm voxel resolution for sphere.</dd>
<dt>dims <span class="classifier-delimiter">:</span> <span class="classifier">array/tuple</span></dt>
<dd>1D vector (x, y, z) of image dimensions for sphere.</dd>
</dl>
<dl class="docutils">
<dt>neighbors <span class="classifier-delimiter">:</span> <span class="classifier">list</span></dt>
<dd>A list of indices, within the dimensions of the image, that fall within a spherical neighborhood defined by
the specified error radius of the list of the input coordinates.</dd>
</dl>
</dd></dl>

<dl class="class">
<dt id="graph.gen_graph.graph_tools">
<em class="property">class </em><code class="descclassname">graph.gen_graph.</code><code class="descname">graph_tools</code><span class="sig-paren">(</span><em>rois</em>, <em>tracks</em>, <em>affine</em>, <em>namer</em>, <em>connectome_path</em>, <em>attr=None</em>, <em>sens='dwi'</em><span class="sig-paren">)</span><a class="headerlink" href="#graph.gen_graph.graph_tools" title="Permalink to this definition">¶</a></dt>
<dd><p>Initializes the graph with nodes corresponding to the number of ROIS</p>
<dl class="docutils">
<dt>rois <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd>Path to a set of ROIs as either an array or nifti file</dd>
<dt>tracks <span class="classifier-delimiter">:</span> <span class="classifier">list</span></dt>
<dd>Streamlines for analysis</dd>
<dt>affine <span class="classifier-delimiter">:</span> <span class="classifier">ndarray</span></dt>
<dd>a 2-D array with ones on the diagonal and zeros elsewhere (DOESN’T APPEAR TO BE Used)</dd>
<dt>namer <span class="classifier-delimiter">:</span> <span class="classifier">name_resource</span></dt>
<dd>Name_resource object containing relevant path for the pipeline</dd>
<dt>connectome_path <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd>Path for the output connectome file (.ssv file)</dd>
<dt>attr <span class="classifier-delimiter">:</span> <span class="classifier">[type], optional</span></dt>
<dd>Node or graph attributes. Can be a list. If 1 dimensional, will be interpretted as a graph attribute. If N dimensional
will be interpretted as node attributes. If it is any other dimensional, it will be ignored, by default None</dd>
<dt>sens <span class="classifier-delimiter">:</span> <span class="classifier">str, optional</span></dt>
<dd>type of MRI scan being analyzed (can be ‘dwi’ or ‘func’), by default “dwi”</dd>
</dl>
<dl class="docutils">
<dt>ValueError</dt>
<dd>graph saved with unsupported igraph modality</dd>
<dt>ValueError</dt>
<dd>graph saved not using edgelist, gpickle, or graphml</dd>
</dl>
<dl class="method">
<dt id="graph.gen_graph.graph_tools.as_matrix">
<code class="descname">as_matrix</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#graph.gen_graph.graph_tools.as_matrix" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the graph as a matrix.</p>
</dd></dl>

<dl class="method">
<dt id="graph.gen_graph.graph_tools.get_graph">
<code class="descname">get_graph</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#graph.gen_graph.graph_tools.get_graph" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the graph object created</p>
</dd></dl>

<dl class="method">
<dt id="graph.gen_graph.graph_tools.make_graph">
<code class="descname">make_graph</code><span class="sig-paren">(</span><em>error_margin=2</em>, <em>overlap_thr=1</em>, <em>voxel_size=2</em><span class="sig-paren">)</span><a class="headerlink" href="#graph.gen_graph.graph_tools.make_graph" title="Permalink to this definition">¶</a></dt>
<dd><p>Takes streamlines and produces a graph using Numpy functions</p>
<dl class="docutils">
<dt>error_margin <span class="classifier-delimiter">:</span> <span class="classifier">int, optional</span></dt>
<dd>[description], by default 2</dd>
<dt>overlap_thr <span class="classifier-delimiter">:</span> <span class="classifier">int, optional</span></dt>
<dd>[description], by default 1</dd>
<dt>voxel_size <span class="classifier-delimiter">:</span> <span class="classifier">int, optional</span></dt>
<dd>[description], by default 2</dd>
</dl>
<dl class="docutils">
<dt>Graph</dt>
<dd>networkx Graph object containing the connectome matrix</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="graph.gen_graph.graph_tools.make_graph_old">
<code class="descname">make_graph_old</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#graph.gen_graph.graph_tools.make_graph_old" title="Permalink to this definition">¶</a></dt>
<dd><p>Takes streamlines and produces a graph
<strong>Positional Arguments:</strong></p>
<blockquote>
<div><dl class="docutils">
<dt>streamlines:</dt>
<dd><ul class="first last simple">
<li>Fiber streamlines either file or array in a dipy EuDX
or compatible format.</li>
</ul>
</dd>
</dl>
</div></blockquote>
</dd></dl>

<dl class="method">
<dt id="graph.gen_graph.graph_tools.save_graph">
<code class="descname">save_graph</code><span class="sig-paren">(</span><em>graphname</em>, <em>fmt='igraph'</em><span class="sig-paren">)</span><a class="headerlink" href="#graph.gen_graph.graph_tools.save_graph" title="Permalink to this definition">¶</a></dt>
<dd><p>Saves the graph to disk</p>
<dl class="docutils">
<dt>graphname <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd>Filename for the graph</dd>
<dt>fmt <span class="classifier-delimiter">:</span> <span class="classifier">str, optional</span></dt>
<dd>Format you want the graph saved as [edgelist, gpickle, graphml, txt, npy, igraph], by default “igraph”</dd>
</dl>
<dl class="docutils">
<dt>ValueError</dt>
<dd>Unsupported modality (not dwi or func) for saving the graph in igraph format</dd>
<dt>ValueError</dt>
<dd>Unsupported format</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="graph.gen_graph.graph_tools.summary">
<code class="descname">summary</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#graph.gen_graph.graph_tools.summary" title="Permalink to this definition">¶</a></dt>
<dd><p>User friendly wrapping and display of graph properties</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-register.gen_reg">
<span id="gen-reg"></span><h2><a class="toc-backref" href="#id6">gen_reg</a><a class="headerlink" href="#module-register.gen_reg" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="register.gen_reg.direct_streamline_norm">
<code class="descclassname">register.gen_reg.</code><code class="descname">direct_streamline_norm</code><span class="sig-paren">(</span><em>streams</em>, <em>fa_path</em>, <em>namer</em><span class="sig-paren">)</span><a class="headerlink" href="#register.gen_reg.direct_streamline_norm" title="Permalink to this definition">¶</a></dt>
<dd><p>Applys the Symmetric Diffeomorphic Registration (SyN) Algorithm onto the streamlines to the atlas space defined by …/atlases/reference_brains/FSL_HCP1065_FA_2mm.nii.gz</p>
<dl class="docutils">
<dt>streams <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd>Path to streamlines.trk file to be transformed</dd>
<dt>fa_path <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd>Path to subject’s FA tensor image</dd>
<dt>namer <span class="classifier-delimiter">:</span> <span class="classifier">name_resource</span></dt>
<dd>variable containing all relevant pathing information</dd>
</dl>
<dl class="docutils">
<dt>ArraySequence</dt>
<dd>Transformed streamlines</dd>
<dt>str</dt>
<dd>Path to tractogram streamline file: streamlines_dsn.trk</dd>
</dl>
</dd></dl>

<dl class="class">
<dt id="register.gen_reg.DmriReg">
<em class="property">class </em><code class="descclassname">register.gen_reg.</code><code class="descname">DmriReg</code><span class="sig-paren">(</span><em>namer</em>, <em>nodif_B0</em>, <em>nodif_B0_mask</em>, <em>t1w_in</em>, <em>vox_size</em>, <em>simple</em><span class="sig-paren">)</span><a class="headerlink" href="#register.gen_reg.DmriReg" title="Permalink to this definition">¶</a></dt>
<dd><p>Class containing relevant paths and class methods for analysing tractography</p>
<dl class="docutils">
<dt>namer <span class="classifier-delimiter">:</span> <span class="classifier">name_resource</span></dt>
<dd>name_resource variable containing relevant directory tree information</dd>
<dt>nodif_B0 <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd>path to mean b0 image</dd>
<dt>nodif_B0_mask <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd>path to mean b0 mask (nodif_B0….nii.gz)</dd>
<dt>t1w_in <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd>path to t1w file</dd>
<dt>vox_size <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd>voxel resolution (‘2mm’ or ‘1mm’)</dd>
<dt>simple <span class="classifier-delimiter">:</span> <span class="classifier">bool</span></dt>
<dd>Whether you want to attempt non-linear registration when transforming between mni, t1w, and dwi space</dd>
</dl>
<dl class="docutils">
<dt>ValueError</dt>
<dd>FSL atlas for ventricle reference not found</dd>
</dl>
<dl class="method">
<dt id="register.gen_reg.DmriReg.atlas2t1w2dwi_align">
<code class="descname">atlas2t1w2dwi_align</code><span class="sig-paren">(</span><em>atlas</em>, <em>dsn=True</em><span class="sig-paren">)</span><a class="headerlink" href="#register.gen_reg.DmriReg.atlas2t1w2dwi_align" title="Permalink to this definition">¶</a></dt>
<dd><p>alignment from atlas to t1w to dwi. A function to perform atlas alignmet. Tries nonlinear registration first, and if that fails, does a liner
registration instead.
Note: for this to work, must first have called t1w2dwi_align.</p>
<dl class="docutils">
<dt>atlas <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd>path to atlas file you want to use</dd>
<dt>dsn <span class="classifier-delimiter">:</span> <span class="classifier">bool, optional</span></dt>
<dd>is your space for tractography native-dsn, by default True</dd>
</dl>
<dl class="docutils">
<dt>str</dt>
<dd>path to aligned atlas file</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="register.gen_reg.DmriReg.gen_tissue">
<code class="descname">gen_tissue</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#register.gen_reg.DmriReg.gen_tissue" title="Permalink to this definition">¶</a></dt>
<dd><p>Extracts the brain from the raw t1w image (as indicated by self.t1w), uses it to create WM, GM, and CSF masks,
reslices all 4 files to the target voxel resolution and extracts the white matter edge. Each mask is saved to 
location indicated by self.map_path</p>
</dd></dl>

<dl class="method">
<dt id="register.gen_reg.DmriReg.t1w2dwi_align">
<code class="descname">t1w2dwi_align</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#register.gen_reg.DmriReg.t1w2dwi_align" title="Permalink to this definition">¶</a></dt>
<dd><p>Alignment from t1w to mni, making t1w_mni, and t1w_mni to dwi. A function to perform self alignment. Uses a local optimisation cost function to get the
two images close, and then uses bbr to obtain a good alignment of brain boundaries. Assumes input dwi is already preprocessed and brain extracted.</p>
</dd></dl>

<dl class="method">
<dt id="register.gen_reg.DmriReg.tissue2dwi_align">
<code class="descname">tissue2dwi_align</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#register.gen_reg.DmriReg.tissue2dwi_align" title="Permalink to this definition">¶</a></dt>
<dd><p>alignment of ventricle and CC ROI’s from MNI space –&gt; dwi and CC and CSF from T1w space –&gt; dwi
A function to generate and perform dwi space alignment of avoidance/waypoint masks for tractography.
First creates ventricle and CC ROI. Then creates transforms from stock MNI template to dwi space.
NOTE: for this to work, must first have called both t1w2dwi_align and atlas2t1w2dwi_align.</p>
<dl class="docutils">
<dt>ValueError</dt>
<dd>Raised if FSL atlas for ventricle reference not found</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="gen-track">
<h2><a class="toc-backref" href="#id7">gen_track</a><a class="headerlink" href="#gen-track" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-utils.gen_utils">
<span id="gen-utils"></span><h2><a class="toc-backref" href="#id8">gen_utils</a><a class="headerlink" href="#module-utils.gen_utils" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="utils.gen_utils.check_dependencies">
<code class="descclassname">utils.gen_utils.</code><code class="descname">check_dependencies</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#utils.gen_utils.check_dependencies" title="Permalink to this definition">¶</a></dt>
<dd><p>Check for the existence of FSL and AFNI.
Stop the pipeline immediately if these dependencies are not installed.</p>
<dl class="docutils">
<dt>AssertionError</dt>
<dd>Raised if FSL is not installed.</dd>
<dt>AssertionError</dt>
<dd>Raised if AFNI is not installed.</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="utils.gen_utils.execute_cmd">
<code class="descclassname">utils.gen_utils.</code><code class="descname">execute_cmd</code><span class="sig-paren">(</span><em>cmd</em>, <em>verb=False</em><span class="sig-paren">)</span><a class="headerlink" href="#utils.gen_utils.execute_cmd" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a bash command, it is executed and the response piped back to the
calling script</p>
</dd></dl>

<dl class="function">
<dt id="utils.gen_utils.get_braindata">
<code class="descclassname">utils.gen_utils.</code><code class="descname">get_braindata</code><span class="sig-paren">(</span><em>brain_file</em><span class="sig-paren">)</span><a class="headerlink" href="#utils.gen_utils.get_braindata" title="Permalink to this definition">¶</a></dt>
<dd><p>Opens a brain data series for a mask, mri image, or atlas.
Returns a numpy.ndarray representation of a brain.
<strong>Positional Arguements</strong></p>
<blockquote>
<div><dl class="docutils">
<dt>brain_file:</dt>
<dd><ul class="first simple">
<li>an object to open the data for a brain.</li>
</ul>
<p class="last">Can be a string (path to a brain file),
nibabel.nifti1.nifti1image, or a numpy.ndarray</p>
</dd>
</dl>
</div></blockquote>
</dd></dl>

<dl class="function">
<dt id="utils.gen_utils.get_filename">
<code class="descclassname">utils.gen_utils.</code><code class="descname">get_filename</code><span class="sig-paren">(</span><em>label</em><span class="sig-paren">)</span><a class="headerlink" href="#utils.gen_utils.get_filename" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a fully qualified path gets just the file name, without extension</p>
</dd></dl>

<dl class="function">
<dt id="utils.gen_utils.get_slice">
<code class="descclassname">utils.gen_utils.</code><code class="descname">get_slice</code><span class="sig-paren">(</span><em>mri</em>, <em>volid</em>, <em>sli</em><span class="sig-paren">)</span><a class="headerlink" href="#utils.gen_utils.get_slice" title="Permalink to this definition">¶</a></dt>
<dd><p>Takes a volume index and constructs a new nifti image from
the specified volume.
<strong>Positional Arguments:</strong></p>
<blockquote>
<div><dl class="docutils">
<dt>mri:</dt>
<dd><ul class="first last simple">
<li>the path to a 4d mri volume to extract a slice from.</li>
</ul>
</dd>
<dt>volid:</dt>
<dd><ul class="first last simple">
<li>the index of the volume desired.</li>
</ul>
</dd>
<dt>sli:</dt>
<dd><ul class="first last simple">
<li>the path to the destination for the slice.</li>
</ul>
</dd>
</dl>
</div></blockquote>
</dd></dl>

<dl class="function">
<dt id="utils.gen_utils.load_timeseries">
<code class="descclassname">utils.gen_utils.</code><code class="descname">load_timeseries</code><span class="sig-paren">(</span><em>timeseries_file</em>, <em>ts='roi'</em><span class="sig-paren">)</span><a class="headerlink" href="#utils.gen_utils.load_timeseries" title="Permalink to this definition">¶</a></dt>
<dd><p>A function to load timeseries data. Exists to standardize
formatting in case changes are made with how timeseries are
saved in future versions.</p>
<blockquote>
<div><dl class="docutils">
<dt><strong>Positional Arguments</strong></dt>
<dd>timeseries_file: the file to load timeseries data from.</dd>
</dl>
</div></blockquote>
</dd></dl>

<dl class="function">
<dt id="utils.gen_utils.make_gtab_and_bmask">
<code class="descclassname">utils.gen_utils.</code><code class="descname">make_gtab_and_bmask</code><span class="sig-paren">(</span><em>fbval</em>, <em>fbvec</em>, <em>dwi_file</em>, <em>outdir</em><span class="sig-paren">)</span><a class="headerlink" href="#utils.gen_utils.make_gtab_and_bmask" title="Permalink to this definition">¶</a></dt>
<dd><p>Takes bval and bvec files and produces a structure in dipy format while also using FSL commands</p>
<dl class="docutils">
<dt>fbval <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd>b-value file</dd>
<dt>fbvec <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd>b-vector file</dd>
<dt>dwi_file <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd>dwi file being analyzed</dd>
<dt>outdir <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd>output directory</dd>
</dl>
<dl class="docutils">
<dt>GradientTable</dt>
<dd>gradient table created from bval and bvec files</dd>
<dt>str</dt>
<dd>location of averaged b0 image file</dd>
<dt>str</dt>
<dd>location of b0 brain mask file</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="utils.gen_utils.match_target_vox_res">
<code class="descclassname">utils.gen_utils.</code><code class="descname">match_target_vox_res</code><span class="sig-paren">(</span><em>img_file</em>, <em>vox_size</em>, <em>namer</em>, <em>sens</em><span class="sig-paren">)</span><a class="headerlink" href="#utils.gen_utils.match_target_vox_res" title="Permalink to this definition">¶</a></dt>
<dd><p>Reslices input MRI file if it does not match the targeted voxel resolution. Can take dwi or t1w scans.</p>
<dl class="docutils">
<dt>img_file <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd>path to file to be resliced</dd>
<dt>vox_size <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd>target voxel resolution (‘2mm’ or ‘1mm’)</dd>
<dt>namer <span class="classifier-delimiter">:</span> <span class="classifier">name_resource</span></dt>
<dd>name_resource variable containing relevant directory tree information</dd>
<dt>sens <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd>type of data being analyzed (‘dwi’ or ‘func’)</dd>
</dl>
<dl class="docutils">
<dt>str</dt>
<dd>location of potentially resliced image</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="utils.gen_utils.parcel_overlap">
<code class="descclassname">utils.gen_utils.</code><code class="descname">parcel_overlap</code><span class="sig-paren">(</span><em>parcellation1</em>, <em>parcellation2</em>, <em>outpath</em><span class="sig-paren">)</span><a class="headerlink" href="#utils.gen_utils.parcel_overlap" title="Permalink to this definition">¶</a></dt>
<dd><p>A function to compute the percent composition of each parcel in
parcellation 1 with the parcels in parcellation 2. Rows are indices
in parcellation 1; cols are parcels in parcellation 2. Values are the
percent of voxels in parcel (parcellation 1) that fall into parcel
(parcellation 2). Implied is that each row sums to 1.
<strong>Positional Arguments:</strong></p>
<blockquote>
<div><dl class="docutils">
<dt>parcellation1:</dt>
<dd><ul class="first last simple">
<li>the path to the first parcellation.</li>
</ul>
</dd>
<dt>parcellation2:</dt>
<dd><ul class="first last simple">
<li>the path to the second parcellation.</li>
</ul>
</dd>
<dt>outpath:</dt>
<dd><ul class="first last simple">
<li>the path to produce the output.</li>
</ul>
</dd>
</dl>
</div></blockquote>
</dd></dl>

<dl class="function">
<dt id="utils.gen_utils.reorient_dwi">
<code class="descclassname">utils.gen_utils.</code><code class="descname">reorient_dwi</code><span class="sig-paren">(</span><em>dwi_prep</em>, <em>bvecs</em>, <em>namer</em><span class="sig-paren">)</span><a class="headerlink" href="#utils.gen_utils.reorient_dwi" title="Permalink to this definition">¶</a></dt>
<dd><p>Orients dwi data to the proper orientation (RAS+) using nibabel</p>
<dl class="docutils">
<dt>dwi_prep <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd>Path to eddy corrected dwi file</dd>
<dt>bvecs <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd>Path to the resaled b-vector file</dd>
<dt>namer <span class="classifier-delimiter">:</span> <span class="classifier">name_resource</span></dt>
<dd>name_resource variable containing relevant directory tree information</dd>
</dl>
<dl class="docutils">
<dt>str</dt>
<dd>Path to potentially reoriented dwi file</dd>
<dt>str</dt>
<dd>Path to b-vector file, potentially reoriented if dwi data was</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="utils.gen_utils.reorient_img">
<code class="descclassname">utils.gen_utils.</code><code class="descname">reorient_img</code><span class="sig-paren">(</span><em>img</em>, <em>namer</em><span class="sig-paren">)</span><a class="headerlink" href="#utils.gen_utils.reorient_img" title="Permalink to this definition">¶</a></dt>
<dd><p>Reorients input image to RAS+</p>
<dl class="docutils">
<dt>img <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd>Path to image being reoriented</dd>
<dt>namer <span class="classifier-delimiter">:</span> <span class="classifier">name_resource</span></dt>
<dd>name_resource object containing all revlevent pathing information for the pipeline</dd>
</dl>
<dl class="docutils">
<dt>str</dt>
<dd>Path to reoriented image</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="utils.gen_utils.show_template_bundles">
<code class="descclassname">utils.gen_utils.</code><code class="descname">show_template_bundles</code><span class="sig-paren">(</span><em>final_streamlines</em>, <em>template_path</em>, <em>fname</em><span class="sig-paren">)</span><a class="headerlink" href="#utils.gen_utils.show_template_bundles" title="Permalink to this definition">¶</a></dt>
<dd><p>Displayes the template bundles</p>
<dl class="docutils">
<dt>final_streamlines <span class="classifier-delimiter">:</span> <span class="classifier">list</span></dt>
<dd>Generated streamlines</dd>
<dt>template_path <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd>Path to reference FA nii.gz file</dd>
<dt>fname <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd>Path of the output file (saved as )</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-utils.loadGraphs">
<span id="loadgraphs"></span><h2><a class="toc-backref" href="#id9">loadGraphs</a><a class="headerlink" href="#module-utils.loadGraphs" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="utils.loadGraphs.loadGraphs">
<code class="descclassname">utils.loadGraphs.</code><code class="descname">loadGraphs</code><span class="sig-paren">(</span><em>filenames</em>, <em>modality='dwi'</em>, <em>verb=False</em><span class="sig-paren">)</span><a class="headerlink" href="#utils.loadGraphs.loadGraphs" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a list of files, returns a dictionary of graphs
Required parameters:</p>
<blockquote>
<div><dl class="docutils">
<dt>filenames:</dt>
<dd><ul class="first last simple">
<li>List of filenames for graphs</li>
</ul>
</dd>
</dl>
</div></blockquote>
<dl class="docutils">
<dt>Optional parameters:</dt>
<dd><dl class="first last docutils">
<dt>verb:</dt>
<dd><ul class="first last simple">
<li>Toggles verbose output statements</li>
</ul>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="mri-autoingest">
<h2><a class="toc-backref" href="#id10">mri_autoingest</a><a class="headerlink" href="#mri-autoingest" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-scripts.multigraph_pipeline">
<span id="multigraph-pipeline"></span><h2><a class="toc-backref" href="#id11">multigraph_pipeline</a><a class="headerlink" href="#module-scripts.multigraph_pipeline" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="scripts.multigraph_pipeline.multigraphs">
<code class="descclassname">scripts.multigraph_pipeline.</code><code class="descname">multigraphs</code><span class="sig-paren">(</span><em>fibers</em>, <em>labels</em>, <em>outdir</em><span class="sig-paren">)</span><a class="headerlink" href="#scripts.multigraph_pipeline.multigraphs" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a brain graph from fiber streamlines</p>
</dd></dl>

</div>
<div class="section" id="module-scripts.ndmg_bids">
<span id="ndmg-bids"></span><h2><a class="toc-backref" href="#id12">ndmg_bids</a><a class="headerlink" href="#module-scripts.ndmg_bids" title="Permalink to this headline">¶</a></h2>
<dl class="data">
<dt id="scripts.ndmg_bids.atlas_dir">
<code class="descclassname">scripts.ndmg_bids.</code><code class="descname">atlas_dir</code><em class="property"> = '/home/rlawre18/.ndmg/ndmg_atlases'</em><a class="headerlink" href="#scripts.ndmg_bids.atlas_dir" title="Permalink to this definition">¶</a></dt>
<dd><p>Given the desired location for atlases and the type of processing, ensure
we have all the atlases and parcellations.</p>
</dd></dl>

<dl class="function">
<dt id="scripts.ndmg_bids.get_atlas">
<code class="descclassname">scripts.ndmg_bids.</code><code class="descname">get_atlas</code><span class="sig-paren">(</span><em>atlas_dir</em>, <em>vox_size</em><span class="sig-paren">)</span><a class="headerlink" href="#scripts.ndmg_bids.get_atlas" title="Permalink to this definition">¶</a></dt>
<dd><p>Given the desired location of atlases and the type of processing, ensure we have all the atlases and parcellations.</p>
<dl class="docutils">
<dt>atlas_dir <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd>Path to directory containing atlases.</dd>
<dt>vox_size <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd>t1w input image voxel dimensions, either 2mm or 1mm</dd>
</dl>
<dl class="docutils">
<dt>tuple</dt>
<dd>filepaths corresponding to the human parcellations, the atlas, and the atlas’s mask. atals_brain and lv_mask is None if not fmri.</dd>
</dl>
<dl class="docutils">
<dt>ValueError</dt>
<dd>raised if dimensionality is wrong.</dd>
<dt>NotImplementedError</dt>
<dd>currently raised in lieu of atlas pulling capabilities.</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="scripts.ndmg_bids.main">
<code class="descclassname">scripts.ndmg_bids.</code><code class="descname">main</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#scripts.ndmg_bids.main" title="Permalink to this definition">¶</a></dt>
<dd><p>Starting point of the ndmg pipeline, assuming that you are using a BIDS organized dataset</p>
</dd></dl>

<dl class="function">
<dt id="scripts.ndmg_bids.session_level">
<code class="descclassname">scripts.ndmg_bids.</code><code class="descname">session_level</code><span class="sig-paren">(</span><em>inDir</em>, <em>outDir</em>, <em>subjs</em>, <em>vox_size</em>, <em>skipeddy</em>, <em>skipreg</em>, <em>clean</em>, <em>atlas_select</em>, <em>mod_type</em>, <em>track_type</em>, <em>mod_func</em>, <em>seeds</em>, <em>reg_style</em>, <em>sesh=None</em>, <em>run=None</em>, <em>buck=None</em>, <em>remo=None</em>, <em>push=False</em>, <em>creds=None</em>, <em>debug=False</em>, <em>modif=''</em><span class="sig-paren">)</span><a class="headerlink" href="#scripts.ndmg_bids.session_level" title="Permalink to this definition">¶</a></dt>
<dd><p>Crawls the given BIDS organized directory for data pertaining to the given subject and session, and passes necessary files to ndmg_dwi_pipeline for processing.</p>
<dl class="docutils">
<dt>inDir <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd>Path to BIDS input directory</dd>
<dt>outDir <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd>Path to output directory</dd>
<dt>subjs <span class="classifier-delimiter">:</span> <span class="classifier">list</span></dt>
<dd>subject label</dd>
<dt>vox_size <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd>Voxel size to use for template registrations.</dd>
<dt>skipeddy <span class="classifier-delimiter">:</span> <span class="classifier">bool</span></dt>
<dd>Whether to skip eddy correction if it has already been run. False means don’t.</dd>
<dt>skipreg <span class="classifier-delimiter">:</span> <span class="classifier">bool</span></dt>
<dd>Whether to skip registration if it has already been run. False means don’t.</dd>
<dt>clean <span class="classifier-delimiter">:</span> <span class="classifier">bool</span></dt>
<dd>Whether or not to delete intermediates</dd>
<dt>atlas_select <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd>The atlas being analyzed in QC (if you only want one)</dd>
<dt>mod_type <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd>Determinstic (det) or probabilistic (prob) tracking</dd>
<dt>track_type <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd>Tracking approach: eudx or local. Default is eudx</dd>
<dt>mod_func <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd>Which diffusion model you want to use, csd or csa</dd>
<dt>reg_style <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd>Space for tractography.</dd>
<dt>sesh <span class="classifier-delimiter">:</span> <span class="classifier">str, optional</span></dt>
<dd>The label of the session that should be analyzed. If not provided all sessions are analyzed. Multiple sessions can be specified with a space separated list. Default is None</dd>
<dt>task <span class="classifier-delimiter">:</span> <span class="classifier">str, optional</span></dt>
<dd>task label. Default is None</dd>
<dt>run <span class="classifier-delimiter">:</span> <span class="classifier">str, optional</span></dt>
<dd>run label. Default is None</dd>
<dt>buck <span class="classifier-delimiter">:</span> <span class="classifier">str, optional</span></dt>
<dd>The name of an S3 bucket which holds BIDS organized data. You musht have build your bucket with credentials to the S3 bucket you wish to access. Default is None</dd>
<dt>remo <span class="classifier-delimiter">:</span> <span class="classifier">str, optional</span></dt>
<dd>The path to the data on your S3 bucket. The data will be downloaded to the provided bids_dir on your machine. Default is None.</dd>
<dt>push <span class="classifier-delimiter">:</span> <span class="classifier">bool, optional</span></dt>
<dd>Flag to push derivatives back to S3. Default is False</dd>
<dt>creds <span class="classifier-delimiter">:</span> <span class="classifier">bool, optional</span></dt>
<dd>Determine if you have S3 credentials. Default is None</dd>
<dt>debug <span class="classifier-delimiter">:</span> <span class="classifier">bool, optional</span></dt>
<dd>If False, remove any old filed in the output directory. Default is False</dd>
<dt>modif <span class="classifier-delimiter">:</span> <span class="classifier">str, optional</span></dt>
<dd>Name of the folder on s3 to push to. If empty, push to a folder with ndmg’s version number. Default is “”</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-scripts.ndmg_cloud">
<span id="ndmg-cloud"></span><h2><a class="toc-backref" href="#id13">ndmg_cloud</a><a class="headerlink" href="#module-scripts.ndmg_cloud" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="scripts.ndmg_cloud.batch_submit">
<code class="descclassname">scripts.ndmg_cloud.</code><code class="descname">batch_submit</code><span class="sig-paren">(</span><em>bucket</em>, <em>path</em>, <em>jobdir</em>, <em>credentials=None</em>, <em>state='participant'</em>, <em>debug=False</em>, <em>dataset=None</em>, <em>log=False</em>, <em>bg=False</em>, <em>modif=''</em>, <em>reg_style=''</em>, <em>mod_type=''</em><span class="sig-paren">)</span><a class="headerlink" href="#scripts.ndmg_cloud.batch_submit" title="Permalink to this definition">¶</a></dt>
<dd><p>Searches through an S3 bucket, gets all subject-ids, creates json files
for each, submits batch jobs, and returns list of job ids to query status
upon later.</p>
</dd></dl>

<dl class="function">
<dt id="scripts.ndmg_cloud.crawl_bucket">
<code class="descclassname">scripts.ndmg_cloud.</code><code class="descname">crawl_bucket</code><span class="sig-paren">(</span><em>bucket</em>, <em>path</em>, <em>jobdir</em><span class="sig-paren">)</span><a class="headerlink" href="#scripts.ndmg_cloud.crawl_bucket" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets subject list for a given S3 bucket and path</p>
</dd></dl>

<dl class="function">
<dt id="scripts.ndmg_cloud.create_json">
<code class="descclassname">scripts.ndmg_cloud.</code><code class="descname">create_json</code><span class="sig-paren">(</span><em>bucket</em>, <em>path</em>, <em>threads</em>, <em>jobdir</em>, <em>credentials=None</em>, <em>debug=False</em>, <em>dataset=None</em>, <em>bg=False</em>, <em>modif=''</em>, <em>reg_style=''</em>, <em>mod_type=''</em><span class="sig-paren">)</span><a class="headerlink" href="#scripts.ndmg_cloud.create_json" title="Permalink to this definition">¶</a></dt>
<dd><p>Takes parameters to make jsons</p>
</dd></dl>

<dl class="function">
<dt id="scripts.ndmg_cloud.get_status">
<code class="descclassname">scripts.ndmg_cloud.</code><code class="descname">get_status</code><span class="sig-paren">(</span><em>jobdir</em>, <em>jobid=None</em><span class="sig-paren">)</span><a class="headerlink" href="#scripts.ndmg_cloud.get_status" title="Permalink to this definition">¶</a></dt>
<dd><p>Given list of jobs, returns status of each.</p>
</dd></dl>

<dl class="function">
<dt id="scripts.ndmg_cloud.kill_jobs">
<code class="descclassname">scripts.ndmg_cloud.</code><code class="descname">kill_jobs</code><span class="sig-paren">(</span><em>jobdir</em>, <em>reason='&quot;Killing job&quot;'</em><span class="sig-paren">)</span><a class="headerlink" href="#scripts.ndmg_cloud.kill_jobs" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a list of jobs, kills them all.</p>
</dd></dl>

<dl class="function">
<dt id="scripts.ndmg_cloud.submit_jobs">
<code class="descclassname">scripts.ndmg_cloud.</code><code class="descname">submit_jobs</code><span class="sig-paren">(</span><em>jobs</em>, <em>jobdir</em><span class="sig-paren">)</span><a class="headerlink" href="#scripts.ndmg_cloud.submit_jobs" title="Permalink to this definition">¶</a></dt>
<dd><p>Give list of jobs to submit, submits them to AWS Batch</p>
</dd></dl>

</div>
<div class="section" id="module-scripts.ndmg_dwi_pipeline">
<span id="ndmg-dwi-pipeline"></span><h2><a class="toc-backref" href="#id14">ndmg_dwi_pipeline</a><a class="headerlink" href="#module-scripts.ndmg_dwi_pipeline" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="scripts.ndmg_dwi_pipeline.ndmg_dwi_worker">
<code class="descclassname">scripts.ndmg_dwi_pipeline.</code><code class="descname">ndmg_dwi_worker</code><span class="sig-paren">(</span><em>dwi</em>, <em>bvals</em>, <em>bvecs</em>, <em>t1w</em>, <em>atlas</em>, <em>mask</em>, <em>labels</em>, <em>outdir</em>, <em>vox_size</em>, <em>mod_type</em>, <em>track_type</em>, <em>mod_func</em>, <em>seeds</em>, <em>reg_style</em>, <em>clean</em>, <em>skipeddy=False</em>, <em>skipreg=False</em>, <em>buck=None</em>, <em>remo=None</em>, <em>push=False</em>, <em>creds=None</em>, <em>debug=False</em>, <em>modif=''</em><span class="sig-paren">)</span><a class="headerlink" href="#scripts.ndmg_dwi_pipeline.ndmg_dwi_worker" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a brain graph from MRI data</p>
<dl class="docutils">
<dt>dwi <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd>Path for the dwi file(s)</dd>
<dt>bvals <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd>Path for the bval file(s)</dd>
<dt>bvecs <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd>Path for the bvec file(s)</dd>
<dt>t1w <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd>Location of anatomical input file(s)</dd>
<dt>atlas <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd>Location of atlas file</dd>
<dt>mask <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd>Location of T1w brain mask file, make sure the proper voxel size is used</dd>
<dt>labels <span class="classifier-delimiter">:</span> <span class="classifier">list</span></dt>
<dd>Location of file containing the labels for the atlas file(s)</dd>
<dt>outdir <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd>The directory where the output files should be stored. Prepopulate this folder with results of participants level analysis if running gorup analysis.</dd>
<dt>vox_size <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd>Voxel size to use for template registrations. Default is ‘2mm’.</dd>
<dt>mod_type <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd>Determinstic (det) or probabilistic (prob) tracking. Default is det.</dd>
<dt>track_type <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd>Tracking approach: eudx or local. Default is eudx.</dd>
<dt>mod_func <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd>Diffusion model: csd, csa, or tensor. Default is tensor.</dd>
<dt>seeds <span class="classifier-delimiter">:</span> <span class="classifier">int</span></dt>
<dd>Density of seeding for native-space tractography.</dd>
<dt>reg_style <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd>Space for tractography. Default is native.</dd>
<dt>clean <span class="classifier-delimiter">:</span> <span class="classifier">bool</span></dt>
<dd>Whether or not to delete intermediates. Default is False.</dd>
<dt>skipeddy <span class="classifier-delimiter">:</span> <span class="classifier">bool</span></dt>
<dd>Whether or not to skip the eddy correction if it has already been run. Default is False.</dd>
<dt>skipreg <span class="classifier-delimiter">:</span> <span class="classifier">bool</span></dt>
<dd>Whether or not to skip registration. Default is False.</dd>
<dt>buck <span class="classifier-delimiter">:</span> <span class="classifier">str, optional</span></dt>
<dd>The name of an S3 bucket which holds BIDS organized data. You musht have build your bucket with credentials to the S3 bucket you wish to access. Default is None</dd>
<dt>remo <span class="classifier-delimiter">:</span> <span class="classifier">str, optional</span></dt>
<dd>The path to the data on your S3 bucket. The data will be downloaded to the provided bids_dir on your machine. Default is None.</dd>
<dt>push <span class="classifier-delimiter">:</span> <span class="classifier">bool, optional</span></dt>
<dd>Flag to push derivatives back to S3. Default is False</dd>
<dt>creds <span class="classifier-delimiter">:</span> <span class="classifier">bool, optional</span></dt>
<dd>Determine if you have S3 credentials. Default is True</dd>
<dt>debug <span class="classifier-delimiter">:</span> <span class="classifier">bool, optional</span></dt>
<dd>If False, remove any old filed in the output directory. Default is False</dd>
<dt>modif <span class="classifier-delimiter">:</span> <span class="classifier">str, optional</span></dt>
<dd>Name of the folder on s3 to push to. If empty, push to a folder with ndmg’s version number. Default is “”</dd>
</dl>
<dl class="docutils">
<dt>ValueError</dt>
<dd>Raised if downsampling voxel size is not supported</dd>
<dt>ValueError</dt>
<dd>Raised if bval/bvecs are potentially corrupted</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-scripts.ndmg_setup">
<span id="ndmg-setup"></span><h2><a class="toc-backref" href="#id15">ndmg_setup</a><a class="headerlink" href="#module-scripts.ndmg_setup" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-utils.nifti_to_binary">
<span id="nifti-to-binary"></span><h2><a class="toc-backref" href="#id16">nifti_to_binary</a><a class="headerlink" href="#module-utils.nifti_to_binary" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="nifti-to-png">
<h2><a class="toc-backref" href="#id17">nifti_to_png</a><a class="headerlink" href="#nifti-to-png" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-stats.plotly_helper">
<span id="plotly-helper"></span><h2><a class="toc-backref" href="#id18">plotly_helper</a><a class="headerlink" href="#module-stats.plotly_helper" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-preproc.preproc_anat">
<span id="preproc-anat"></span><h2><a class="toc-backref" href="#id19">preproc_anat</a><a class="headerlink" href="#module-preproc.preproc_anat" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-stats.qa_adjacency">
<span id="qa-adjacency"></span><h2><a class="toc-backref" href="#id20">qa_adjacency</a><a class="headerlink" href="#module-stats.qa_adjacency" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="stats.qa_adjacency.graph2png">
<code class="descclassname">stats.qa_adjacency.</code><code class="descname">graph2png</code><span class="sig-paren">(</span><em>infile</em>, <em>outdir</em>, <em>fname=None</em><span class="sig-paren">)</span><a class="headerlink" href="#stats.qa_adjacency.graph2png" title="Permalink to this definition">¶</a></dt>
<dd><p>infile: input .csv file
outdir: path to directory to store output png files</p>
</dd></dl>

<dl class="function">
<dt id="stats.qa_adjacency.main">
<code class="descclassname">stats.qa_adjacency.</code><code class="descname">main</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#stats.qa_adjacency.main" title="Permalink to this definition">¶</a></dt>
<dd><p>Argument parser and directory crawler. Takes organization and atlas
information and produces a dictionary of file lists based on datasets
of interest and then passes it off for processing.</p>
<dl class="docutils">
<dt>infile:</dt>
<dd>Basepath for which data can be found directly inwards from</dd>
<dt>outdir:</dt>
<dd>Path to derivative save location</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-stats.qa_fibers">
<span id="qa-fibers"></span><h2><a class="toc-backref" href="#id21">qa_fibers</a><a class="headerlink" href="#module-stats.qa_fibers" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="stats.qa_fibers.load_atlas">
<code class="descclassname">stats.qa_fibers.</code><code class="descname">load_atlas</code><span class="sig-paren">(</span><em>path</em>, <em>opacity</em><span class="sig-paren">)</span><a class="headerlink" href="#stats.qa_fibers.load_atlas" title="Permalink to this definition">¶</a></dt>
<dd><p>path: path to atlas file
opacity: opacity of overlayed atlas brain</p>
</dd></dl>

<dl class="function">
<dt id="stats.qa_fibers.random_sample">
<code class="descclassname">stats.qa_fibers.</code><code class="descname">random_sample</code><span class="sig-paren">(</span><em>fibs</em>, <em>num_samples</em><span class="sig-paren">)</span><a class="headerlink" href="#stats.qa_fibers.random_sample" title="Permalink to this definition">¶</a></dt>
<dd><p>fibs: fibers thresholded above median
num_samples: number of fibers to sample from fibs</p>
</dd></dl>

<dl class="function">
<dt id="stats.qa_fibers.threshold_fibers">
<code class="descclassname">stats.qa_fibers.</code><code class="descname">threshold_fibers</code><span class="sig-paren">(</span><em>fibs</em><span class="sig-paren">)</span><a class="headerlink" href="#stats.qa_fibers.threshold_fibers" title="Permalink to this definition">¶</a></dt>
<dd><p>fibs: fibers as 2D array (N,3)</p>
</dd></dl>

<dl class="function">
<dt id="stats.qa_fibers.visualize_fibs">
<code class="descclassname">stats.qa_fibers.</code><code class="descname">visualize_fibs</code><span class="sig-paren">(</span><em>fibs</em>, <em>atlasfile</em>, <em>outdir</em>, <em>opacity</em>, <em>num_samples</em><span class="sig-paren">)</span><a class="headerlink" href="#stats.qa_fibers.visualize_fibs" title="Permalink to this definition">¶</a></dt>
<dd><p>Takes fiber streamlines and visualizes them using DiPy
Required Arguments:</p>
<blockquote>
<div>fibfile: Path to fiber file
atlasfile: Path to atlas file
outdir: Path to output directory
opacity: Opacity of overlayed brain
num_samples: number of fibers to randomly sample from fibfile</div></blockquote>
<p>Optional Arguments:</p>
</dd></dl>

</div>
<div class="section" id="module-stats.qa_graphs">
<span id="qa-graphs"></span><h2><a class="toc-backref" href="#id22">qa_graphs</a><a class="headerlink" href="#module-stats.qa_graphs" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="stats.qa_graphs.binGraphs">
<code class="descclassname">stats.qa_graphs.</code><code class="descname">binGraphs</code><span class="sig-paren">(</span><em>graphs</em>, <em>thr=0.1</em><span class="sig-paren">)</span><a class="headerlink" href="#stats.qa_graphs.binGraphs" title="Permalink to this definition">¶</a></dt>
<dd><p>Binarizes a set of graphs given a threshold.</p>
<dl class="docutils">
<dt>Required Parameters:</dt>
<dd><dl class="first last docutils">
<dt>graphs:</dt>
<dd><ul class="first last simple">
<li>a list of graphs.</li>
</ul>
</dd>
<dt>thr:</dt>
<dd><ul class="first last simple">
<li>the threshold below which edges will be assumed disconnected.
.1 is chosen as default according to discriminability results.</li>
</ul>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="stats.qa_graphs.compute_metrics">
<code class="descclassname">stats.qa_graphs.</code><code class="descname">compute_metrics</code><span class="sig-paren">(</span><em>fs</em>, <em>outdir</em>, <em>atlas</em>, <em>verb=False</em>, <em>modality='dwi'</em><span class="sig-paren">)</span><a class="headerlink" href="#stats.qa_graphs.compute_metrics" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a set of files and a directory to put things, loads graphs and
performs set of analyses on them, storing derivatives in a pickle format
in the desired output location.</p>
<dl class="docutils">
<dt>Required parameters:</dt>
<dd><dl class="first last docutils">
<dt>fs:</dt>
<dd><ul class="first last simple">
<li>Dictionary of lists of files in each dataset</li>
</ul>
</dd>
<dt>outdir:</dt>
<dd><ul class="first last simple">
<li>Path to derivative save location</li>
</ul>
</dd>
<dt>atlas:</dt>
<dd><ul class="first last simple">
<li>Name of atlas of interest as it appears in the directory titles</li>
</ul>
</dd>
</dl>
</dd>
<dt>Optional parameters:</dt>
<dd><dl class="first last docutils">
<dt>verb:</dt>
<dd><ul class="first last simple">
<li>Toggles verbose output statements</li>
</ul>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="stats.qa_graphs.density">
<code class="descclassname">stats.qa_graphs.</code><code class="descname">density</code><span class="sig-paren">(</span><em>data</em>, <em>nbins=500</em>, <em>rng=None</em><span class="sig-paren">)</span><a class="headerlink" href="#stats.qa_graphs.density" title="Permalink to this definition">¶</a></dt>
<dd><p>Computes density for metrics which return vectors</p>
<dl class="docutils">
<dt>Required parameters:</dt>
<dd><dl class="first last docutils">
<dt>data:</dt>
<dd><ul class="first last simple">
<li>Dictionary of the vectors of data</li>
</ul>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="stats.qa_graphs.main">
<code class="descclassname">stats.qa_graphs.</code><code class="descname">main</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#stats.qa_graphs.main" title="Permalink to this definition">¶</a></dt>
<dd><p>Argument parser and directory crawler. Takes organization and atlas
information and produces a dictionary of file lists based on datasets
of interest and then passes it off for processing.</p>
<dl class="docutils">
<dt>Required parameters:</dt>
<dd><dl class="first last docutils">
<dt>atlas:</dt>
<dd><ul class="first last simple">
<li>Name of atlas of interest as it appears in the directory titles</li>
</ul>
</dd>
<dt>basepath:</dt>
<dd><ul class="first last simple">
<li>Basepath for which data can be found directly inwards from</li>
</ul>
</dd>
<dt>outdir:</dt>
<dd><ul class="first last simple">
<li>Path to derivative save location</li>
</ul>
</dd>
</dl>
</dd>
<dt>Optional parameters:</dt>
<dd><dl class="first last docutils">
<dt>fmt:</dt>
<dd><ul class="first last simple">
<li>Determines file organization; whether graphs are stored as
…/atlas/dataset/graphs or …/dataset/atlas/graphs. If the
latter, use the flag.</li>
</ul>
</dd>
<dt>verb:</dt>
<dd><ul class="first last simple">
<li>Toggles verbose output statements</li>
</ul>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="stats.qa_graphs.rankGraphs">
<code class="descclassname">stats.qa_graphs.</code><code class="descname">rankGraphs</code><span class="sig-paren">(</span><em>graphs</em><span class="sig-paren">)</span><a class="headerlink" href="#stats.qa_graphs.rankGraphs" title="Permalink to this definition">¶</a></dt>
<dd><p>Ranks the edges in each element of a list of graphs.</p>
<dl class="docutils">
<dt>Required Parameters:</dt>
<dd><dl class="first last docutils">
<dt>graphs:</dt>
<dd><ul class="first last simple">
<li>a list of graphs.</li>
</ul>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="stats.qa_graphs.scan_statistic">
<code class="descclassname">stats.qa_graphs.</code><code class="descname">scan_statistic</code><span class="sig-paren">(</span><em>mygs</em>, <em>i</em><span class="sig-paren">)</span><a class="headerlink" href="#stats.qa_graphs.scan_statistic" title="Permalink to this definition">¶</a></dt>
<dd><p>Computes scan statistic-i on a set of graphs</p>
<dl class="docutils">
<dt>Required Parameters:</dt>
<dd><dl class="first last docutils">
<dt>mygs:</dt>
<dd><ul class="first last simple">
<li>Dictionary of graphs</li>
</ul>
</dd>
<dt>i:</dt>
<dd><ul class="first last simple">
<li>which scan statistic to compute</li>
</ul>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="stats.qa_graphs.write">
<code class="descclassname">stats.qa_graphs.</code><code class="descname">write</code><span class="sig-paren">(</span><em>outdir</em>, <em>metric</em>, <em>data</em>, <em>atlas</em><span class="sig-paren">)</span><a class="headerlink" href="#stats.qa_graphs.write" title="Permalink to this definition">¶</a></dt>
<dd><p>Write computed derivative to disk in a pickle file</p>
<dl class="docutils">
<dt>Required parameters:</dt>
<dd><dl class="first last docutils">
<dt>outdir:</dt>
<dd><ul class="first last simple">
<li>Path to derivative save location</li>
</ul>
</dd>
<dt>metric:</dt>
<dd><ul class="first last simple">
<li>The value that was calculated</li>
</ul>
</dd>
<dt>data:</dt>
<dd><ul class="first last simple">
<li>The results of this calculation</li>
</ul>
</dd>
<dt>atlas:</dt>
<dd><ul class="first last simple">
<li>Name of atlas of interest as it appears in the directory titles</li>
</ul>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-stats.qa_tensor">
<span id="qa-tensor"></span><h2><a class="toc-backref" href="#id23">qa_tensor</a><a class="headerlink" href="#module-stats.qa_tensor" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="stats.qa_tensor.fa_pngs">
<code class="descclassname">stats.qa_tensor.</code><code class="descname">fa_pngs</code><span class="sig-paren">(</span><em>data</em>, <em>fname</em>, <em>outdir</em><span class="sig-paren">)</span><a class="headerlink" href="#stats.qa_tensor.fa_pngs" title="Permalink to this definition">¶</a></dt>
<dd><p>data: fa map</p>
</dd></dl>

<dl class="function">
<dt id="stats.qa_tensor.tensor2fa">
<code class="descclassname">stats.qa_tensor.</code><code class="descname">tensor2fa</code><span class="sig-paren">(</span><em>tensors</em>, <em>tensor_name</em>, <em>dti</em>, <em>derivdir</em>, <em>qcdir</em><span class="sig-paren">)</span><a class="headerlink" href="#stats.qa_tensor.tensor2fa" title="Permalink to this definition">¶</a></dt>
<dd><p>outdir: location of output directory.
fname: name of output fa map file. default is none (name created based on
input file)</p>
</dd></dl>

</div>
<div class="section" id="module-utils.reg_utils">
<span id="reg-utils"></span><h2><a class="toc-backref" href="#id24">reg_utils</a><a class="headerlink" href="#module-utils.reg_utils" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="utils.reg_utils.align">
<code class="descclassname">utils.reg_utils.</code><code class="descname">align</code><span class="sig-paren">(</span><em>inp</em>, <em>ref</em>, <em>xfm=None</em>, <em>out=None</em>, <em>dof=12</em>, <em>searchrad=True</em>, <em>bins=256</em>, <em>interp=None</em>, <em>cost='mutualinfo'</em>, <em>sch=None</em>, <em>wmseg=None</em>, <em>init=None</em>, <em>finesearch=None</em><span class="sig-paren">)</span><a class="headerlink" href="#utils.reg_utils.align" title="Permalink to this definition">¶</a></dt>
<dd><p>Aligns two images using FSLs flirt function and stores the transform between them</p>
<dl class="docutils">
<dt>inp <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd>path to input image being altered to align with the reference image as a nifti image file</dd>
<dt>ref <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd>path to reference image being aligned to as a nifti image file</dd>
<dt>xfm <span class="classifier-delimiter">:</span> <span class="classifier">str, optional</span></dt>
<dd>where to save the 4x4 affine matrix containing the transform between two images, by default None</dd>
<dt>out <span class="classifier-delimiter">:</span> <span class="classifier">str, optional</span></dt>
<dd>determines whether the image will be automatically aligned and where the resulting image will be saved, by default None</dd>
<dt>dof <span class="classifier-delimiter">:</span> <span class="classifier">int, optional</span></dt>
<dd>the number of degrees of free dome of the alignment, by default 12</dd>
<dt>searchrad <span class="classifier-delimiter">:</span> <span class="classifier">bool, optional</span></dt>
<dd>whether to use the predefined searchradius parameter (180 degree sweep in x, y, and z), by default True</dd>
<dt>bins <span class="classifier-delimiter">:</span> <span class="classifier">int, optional</span></dt>
<dd>number of histogram bins, by default 256</dd>
<dt>interp <span class="classifier-delimiter">:</span> <span class="classifier">str, optional</span></dt>
<dd>interpolation method to be used (trilinear,nearestneighbour,sinc,spline), by default None</dd>
<dt>cost <span class="classifier-delimiter">:</span> <span class="classifier">str, optional</span></dt>
<dd>cost function to be used in alignment (mutualinfo, corratio, normcorr, normmi, leastsq, labeldiff, or bbr), by default “mutualinfo”</dd>
<dt>sch <span class="classifier-delimiter">:</span> <span class="classifier">str, optional</span></dt>
<dd>the optional FLIRT schedule, by default None</dd>
<dt>wmseg <span class="classifier-delimiter">:</span> <span class="classifier">str, optional</span></dt>
<dd>an optional white-matter segmentation for bbr, by default None</dd>
<dt>init <span class="classifier-delimiter">:</span> <span class="classifier">str, optional</span></dt>
<dd>an initial guess of an alignment in the form of the path to a matrix file, by default None</dd>
<dt>finesearch <span class="classifier-delimiter">:</span> <span class="classifier">int, optional</span></dt>
<dd>angle in degrees, by default None</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="utils.reg_utils.align_epi">
<code class="descclassname">utils.reg_utils.</code><code class="descname">align_epi</code><span class="sig-paren">(</span><em>epi</em>, <em>t1</em>, <em>brain</em>, <em>out</em><span class="sig-paren">)</span><a class="headerlink" href="#utils.reg_utils.align_epi" title="Permalink to this definition">¶</a></dt>
<dd><p>Algins EPI images to T1w image</p>
</dd></dl>

<dl class="function">
<dt id="utils.reg_utils.align_nonlinear">
<code class="descclassname">utils.reg_utils.</code><code class="descname">align_nonlinear</code><span class="sig-paren">(</span><em>inp</em>, <em>ref</em>, <em>xfm</em>, <em>out</em>, <em>warp</em>, <em>ref_mask=None</em>, <em>in_mask=None</em>, <em>config=None</em><span class="sig-paren">)</span><a class="headerlink" href="#utils.reg_utils.align_nonlinear" title="Permalink to this definition">¶</a></dt>
<dd><p>Aligns two images using nonlinear methods and stores the transform between them using fnirt</p>
<dl class="docutils">
<dt>inp <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd>path to the input image</dd>
<dt>ref <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd>path to the reference image that the input will be aligned to</dd>
<dt>xfm <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd>path to the file containing the affine transform matrix created by reg_utils.align()</dd>
<dt>out <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd>path for the desired output image</dd>
<dt>warp <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd>the path to store the output file containing the nonlinear warp coefficients/fields</dd>
<dt>ref_mask <span class="classifier-delimiter">:</span> <span class="classifier">str, optional</span></dt>
<dd>path to the reference image brain_mask, by default None</dd>
<dt>in_mask <span class="classifier-delimiter">:</span> <span class="classifier">str, optional</span></dt>
<dd>path for the file with mask in input image space, by default None</dd>
<dt>config <span class="classifier-delimiter">:</span> <span class="classifier">str, optional</span></dt>
<dd>path to the config file specifying command line arguments, by default None</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="utils.reg_utils.align_slices">
<code class="descclassname">utils.reg_utils.</code><code class="descname">align_slices</code><span class="sig-paren">(</span><em>dwi</em>, <em>corrected_dwi</em>, <em>idx</em><span class="sig-paren">)</span><a class="headerlink" href="#utils.reg_utils.align_slices" title="Permalink to this definition">¶</a></dt>
<dd><p>Performs eddy-correction (or self-alignment) of a stack of 3D images
<strong>Positional Arguments:</strong></p>
<blockquote>
<div><dl class="docutils">
<dt>dwi:</dt>
<dd><ul class="first last simple">
<li>4D (DTI) image volume as a nifti file</li>
</ul>
</dd>
<dt>corrected_dwi:</dt>
<dd><ul class="first last simple">
<li>Corrected and aligned DTI volume in a nifti file</li>
</ul>
</dd>
<dt>idx:</dt>
<dd><ul class="first last simple">
<li>Index of the first B0 volume in the stack</li>
</ul>
</dd>
</dl>
</div></blockquote>
</dd></dl>

<dl class="function">
<dt id="utils.reg_utils.apply_mask">
<code class="descclassname">utils.reg_utils.</code><code class="descname">apply_mask</code><span class="sig-paren">(</span><em>inp</em>, <em>mask</em>, <em>out</em><span class="sig-paren">)</span><a class="headerlink" href="#utils.reg_utils.apply_mask" title="Permalink to this definition">¶</a></dt>
<dd><p>A function to generate a brain-only mask for an input image.</p>
<p><strong>Positional Arguments:</strong></p>
<blockquote>
<div><ul class="simple">
<li><dl class="first docutils">
<dt>inp:</dt>
<dd><ul class="first last">
<li>the input image. If 4d, the mask should be 4d. If 3d, the
mask should be 3d.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>mask:</dt>
<dd><ul class="first last">
<li>the mask to apply to the data. Should be nonzero in mask region.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>out:</dt>
<dd><ul class="first last">
<li>the path to the skull-extracted image.</li>
</ul>
</dd>
</dl>
</li>
</ul>
</div></blockquote>
</dd></dl>

<dl class="function">
<dt id="utils.reg_utils.apply_warp">
<code class="descclassname">utils.reg_utils.</code><code class="descname">apply_warp</code><span class="sig-paren">(</span><em>ref</em>, <em>inp</em>, <em>out</em>, <em>warp</em>, <em>xfm=None</em>, <em>mask=None</em>, <em>interp=None</em>, <em>sup=False</em><span class="sig-paren">)</span><a class="headerlink" href="#utils.reg_utils.apply_warp" title="Permalink to this definition">¶</a></dt>
<dd><p>Applies a warp from the structural to reference space in a single step using information about
the structural -&gt; ref mapping as well as the functional to structural mapping.</p>
<dl class="docutils">
<dt>ref <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd>path of the reference image to be aligned to</dd>
<dt>inp <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd>path of the input image to be aligned</dd>
<dt>out <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd>path for the resulting warped output image</dd>
<dt>warp <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd>path for the warp coefficent file to go from inp -&gt; ref</dd>
<dt>xfm <span class="classifier-delimiter">:</span> <span class="classifier">str, optional</span></dt>
<dd>path of the affine transformation matrix file from inp -&gt; ref, by default None</dd>
<dt>mask <span class="classifier-delimiter">:</span> <span class="classifier">str, optional</span></dt>
<dd>path of filename for mask image (in reference space), by default None</dd>
<dt>interp <span class="classifier-delimiter">:</span> <span class="classifier">str, optional</span></dt>
<dd>interpolation method {nn, trilinear, sinc, spline}, by default None</dd>
<dt>sup <span class="classifier-delimiter">:</span> <span class="classifier">bool, optional</span></dt>
<dd>whether to perform automatic intermediary supersampling, by default False</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="utils.reg_utils.applyxfm">
<code class="descclassname">utils.reg_utils.</code><code class="descname">applyxfm</code><span class="sig-paren">(</span><em>ref</em>, <em>inp</em>, <em>xfm</em>, <em>aligned</em>, <em>interp='trilinear'</em>, <em>dof=6</em><span class="sig-paren">)</span><a class="headerlink" href="#utils.reg_utils.applyxfm" title="Permalink to this definition">¶</a></dt>
<dd><p>Aligns two images with a given transform using FSLs flirt command</p>
<dl class="docutils">
<dt>ref <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd>path of reference image to be aligned too as a nifti image file</dd>
<dt>inp <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd>path of input image to be aligned as a nifti image file</dd>
<dt>xfm <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd>path to the transform matrix between the two images</dd>
<dt>aligned <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd>path for the output aligned image</dd>
<dt>interp <span class="classifier-delimiter">:</span> <span class="classifier">str, optional</span></dt>
<dd>interpolation method, by default “trilinear”</dd>
<dt>dof <span class="classifier-delimiter">:</span> <span class="classifier">int, optional</span></dt>
<dd>degrees of freedom for the alignment, by default 6</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="utils.reg_utils.combine_xfms">
<code class="descclassname">utils.reg_utils.</code><code class="descname">combine_xfms</code><span class="sig-paren">(</span><em>xfm1</em>, <em>xfm2</em>, <em>xfmout</em><span class="sig-paren">)</span><a class="headerlink" href="#utils.reg_utils.combine_xfms" title="Permalink to this definition">¶</a></dt>
<dd><p>A function to combine two transformatios and output the resulting transformation</p>
<dl class="docutils">
<dt>xfm1 <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd>path to the first transformation</dd>
<dt>xfm2 <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd>path to the second transformation</dd>
<dt>xfmout <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd>path for the ouput transformation</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="utils.reg_utils.erode_mask">
<code class="descclassname">utils.reg_utils.</code><code class="descname">erode_mask</code><span class="sig-paren">(</span><em>mask</em>, <em>v=0</em><span class="sig-paren">)</span><a class="headerlink" href="#utils.reg_utils.erode_mask" title="Permalink to this definition">¶</a></dt>
<dd><p>A function to erode a mask by a specified number of
voxels. Here, we define erosion as the process of checking
whether all the voxels within a number of voxels for a
mask have values.</p>
<p><strong>Positional Arguments:</strong></p>
<blockquote>
<div><dl class="docutils">
<dt>mask:</dt>
<dd><ul class="first last simple">
<li>a numpy array of a mask to be eroded.</li>
</ul>
</dd>
<dt>v:</dt>
<dd><ul class="first last simple">
<li>the number of voxels to erode by.</li>
</ul>
</dd>
</dl>
</div></blockquote>
</dd></dl>

<dl class="function">
<dt id="utils.reg_utils.extract_brain">
<code class="descclassname">utils.reg_utils.</code><code class="descname">extract_brain</code><span class="sig-paren">(</span><em>inp</em>, <em>out</em>, <em>opts='-B'</em><span class="sig-paren">)</span><a class="headerlink" href="#utils.reg_utils.extract_brain" title="Permalink to this definition">¶</a></dt>
<dd><p>A function to extract the brain from an image using FSL’s BET.
<strong>Positional Arguments:</strong></p>
<blockquote>
<div><dl class="docutils">
<dt>inp:</dt>
<dd><ul class="first last simple">
<li>the input image.</li>
</ul>
</dd>
<dt>out:</dt>
<dd><ul class="first last simple">
<li>the output brain extracted image.</li>
</ul>
</dd>
</dl>
</div></blockquote>
</dd></dl>

<dl class="function">
<dt id="utils.reg_utils.extract_epi_brain">
<code class="descclassname">utils.reg_utils.</code><code class="descname">extract_epi_brain</code><span class="sig-paren">(</span><em>epi</em>, <em>out</em>, <em>tmpdir</em><span class="sig-paren">)</span><a class="headerlink" href="#utils.reg_utils.extract_epi_brain" title="Permalink to this definition">¶</a></dt>
<dd><p>A function to extract the brain from an input 4d EPI image
using AFNI’s brain extraction utilities.</p>
<p><strong>Positional Arguments:</strong></p>
<blockquote>
<div><ul class="simple">
<li><dl class="first docutils">
<dt>epi:</dt>
<dd><ul class="first last">
<li>the path to a 4D epi image.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>out:</dt>
<dd><ul class="first last">
<li>the path to the EPI brain.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>tmpdir:</dt>
<dd><ul class="first last">
<li>the directory to place temporary files.</li>
</ul>
</dd>
</dl>
</li>
</ul>
</div></blockquote>
</dd></dl>

<dl class="function">
<dt id="utils.reg_utils.extract_mask">
<code class="descclassname">utils.reg_utils.</code><code class="descname">extract_mask</code><span class="sig-paren">(</span><em>inp</em>, <em>out</em><span class="sig-paren">)</span><a class="headerlink" href="#utils.reg_utils.extract_mask" title="Permalink to this definition">¶</a></dt>
<dd><p>A function that extracts a mask from images using AFNI’s
3dAutomask algorithm.</p>
<p><strong>Positional Arguments:</strong></p>
<blockquote>
<div><ul class="simple">
<li><dl class="first docutils">
<dt>inp:</dt>
<dd>the input image. Can be a skull-stripped T1w (from 3dSkullStrip)
or a 4d EPI image.</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>out:</dt>
<dd><ul class="first last">
<li>the path to the extracted mask.</li>
</ul>
</dd>
</dl>
</li>
</ul>
</div></blockquote>
</dd></dl>

<dl class="function">
<dt id="utils.reg_utils.extract_t1w_brain">
<code class="descclassname">utils.reg_utils.</code><code class="descname">extract_t1w_brain</code><span class="sig-paren">(</span><em>t1w</em>, <em>out</em>, <em>tmpdir</em><span class="sig-paren">)</span><a class="headerlink" href="#utils.reg_utils.extract_t1w_brain" title="Permalink to this definition">¶</a></dt>
<dd><p>A function to extract the brain from an input T1w image
using AFNI’s brain extraction utilities.</p>
<p><strong>Positional Arguments:</strong></p>
<blockquote>
<div><ul class="simple">
<li><dl class="first docutils">
<dt>t1w:</dt>
<dd><ul class="first last">
<li>the input T1w image.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>out:</dt>
<dd><ul class="first last">
<li>the output T1w brain.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>tmpdir:</dt>
<dd><ul class="first last">
<li>the temporary directory to store images.</li>
</ul>
</dd>
</dl>
</li>
</ul>
</div></blockquote>
</dd></dl>

<dl class="function">
<dt id="utils.reg_utils.get_filename">
<code class="descclassname">utils.reg_utils.</code><code class="descname">get_filename</code><span class="sig-paren">(</span><em>label</em><span class="sig-paren">)</span><a class="headerlink" href="#utils.reg_utils.get_filename" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a fully qualified path gets just the file name, without extension</p>
</dd></dl>

<dl class="function">
<dt id="utils.reg_utils.inverse_warp">
<code class="descclassname">utils.reg_utils.</code><code class="descname">inverse_warp</code><span class="sig-paren">(</span><em>ref</em>, <em>out</em>, <em>warp</em><span class="sig-paren">)</span><a class="headerlink" href="#utils.reg_utils.inverse_warp" title="Permalink to this definition">¶</a></dt>
<dd><p>Takes a non-linear mapping and finds the inverse. Takes the file conaining warp-coefficients/fields specified in the
variable warp (t1w -&gt; mni) and creates its inverse (mni -&gt; t1w) which is saved in the location determined by the variable out</p>
<dl class="docutils">
<dt>ref <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd>path to a file in target space, which is a different target space than warp (a image that has not been mapped to mni)</dd>
<dt>out <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd>path to the output file, containing warps that are now inverted</dd>
<dt>warp <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd>path to the warp/shiftmap transform volume wanting to be inverted</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="utils.reg_utils.normalize_t1w">
<code class="descclassname">utils.reg_utils.</code><code class="descname">normalize_t1w</code><span class="sig-paren">(</span><em>inp</em>, <em>out</em><span class="sig-paren">)</span><a class="headerlink" href="#utils.reg_utils.normalize_t1w" title="Permalink to this definition">¶</a></dt>
<dd><p>A function that normalizes intensity values for anatomical
T1w images. Makes brain extraction much more robust
in the event that we have poor shading in our T1w image.</p>
<p><strong>Positional Arguments:</strong></p>
<blockquote>
<div><ul class="simple">
<li><dl class="first docutils">
<dt>inp:</dt>
<dd><ul class="first last">
<li>the input T1w image.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>out:</dt>
<dd><ul class="first last">
<li>the output intensity-normalized image.</li>
</ul>
</dd>
</dl>
</li>
</ul>
</div></blockquote>
</dd></dl>

<dl class="function">
<dt id="utils.reg_utils.normalize_xform">
<code class="descclassname">utils.reg_utils.</code><code class="descname">normalize_xform</code><span class="sig-paren">(</span><em>img</em><span class="sig-paren">)</span><a class="headerlink" href="#utils.reg_utils.normalize_xform" title="Permalink to this definition">¶</a></dt>
<dd><p>Set identical, valid qform and sform matrices in an image
Selects the best available affine (sform &gt; qform &gt; shape-based), and
coerces it to be qform-compatible (no shears).
The resulting image represents this same affine as both qform and sform,
and is marked as NIFTI_XFORM_ALIGNED_ANAT, indicating that it is valid,
not aligned to template, and not necessarily preserving the original
coordinates.
If header would be unchanged, returns input image.</p>
<dl class="docutils">
<dt>img <span class="classifier-delimiter">:</span> <span class="classifier">Nifti1Image</span></dt>
<dd>Input image to be normalized</dd>
</dl>
<dl class="docutils">
<dt>Nifti1Image</dt>
<dd>normalized image</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="utils.reg_utils.probmap2mask">
<code class="descclassname">utils.reg_utils.</code><code class="descname">probmap2mask</code><span class="sig-paren">(</span><em>prob_map</em>, <em>mask_path</em>, <em>t</em>, <em>erode=0</em><span class="sig-paren">)</span><a class="headerlink" href="#utils.reg_utils.probmap2mask" title="Permalink to this definition">¶</a></dt>
<dd><p>A function to extract a mask from a probability map.
Also, performs mask erosion as a substep.</p>
<p><strong>Positional Arguments:</strong></p>
<blockquote>
<div><dl class="docutils">
<dt>prob_map:</dt>
<dd><ul class="first last simple">
<li>the path to probability map for the given class
of brain tissue.</li>
</ul>
</dd>
<dt>mask_path:</dt>
<dd><ul class="first last simple">
<li>the path to the extracted mask.</li>
</ul>
</dd>
<dt>t:</dt>
<dd><ul class="first last simple">
<li>the threshold to consider voxels part of the class.</li>
</ul>
</dd>
<dt>erode=0:</dt>
<dd><ul class="first last simple">
<li>the number of voxels to erode by. Defaults to 0.</li>
</ul>
</dd>
</dl>
</div></blockquote>
</dd></dl>

<dl class="function">
<dt id="utils.reg_utils.resample">
<code class="descclassname">utils.reg_utils.</code><code class="descname">resample</code><span class="sig-paren">(</span><em>base</em>, <em>ingested</em>, <em>template</em><span class="sig-paren">)</span><a class="headerlink" href="#utils.reg_utils.resample" title="Permalink to this definition">¶</a></dt>
<dd><p>Resamples the image such that images which have already been aligned
in real coordinates also overlap in the image/voxel space.</p>
<dl class="docutils">
<dt><strong>Positional Arguments</strong></dt>
<dd><dl class="first last docutils">
<dt>base:</dt>
<dd><ul class="first last simple">
<li>Image to be aligned</li>
</ul>
</dd>
<dt>ingested:</dt>
<dd><ul class="first last simple">
<li>Name of image after alignment</li>
</ul>
</dd>
<dt>template:</dt>
<dd><ul class="first last simple">
<li>Image that is the target of the alignment</li>
</ul>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="utils.reg_utils.resample_fsl">
<code class="descclassname">utils.reg_utils.</code><code class="descname">resample_fsl</code><span class="sig-paren">(</span><em>base</em>, <em>res</em>, <em>goal_res</em>, <em>interp='spline'</em><span class="sig-paren">)</span><a class="headerlink" href="#utils.reg_utils.resample_fsl" title="Permalink to this definition">¶</a></dt>
<dd><p>A function to resample a base image in fsl to that of a template.</p>
<p><strong>Positional Arguments:</strong></p>
<blockquote>
<div><dl class="docutils">
<dt>base:</dt>
<dd><ul class="first last simple">
<li>the path to the base image to resample.</li>
</ul>
</dd>
<dt>res:</dt>
<dd><ul class="first last simple">
<li>the filename after resampling.</li>
</ul>
</dd>
<dt>goal_res:</dt>
<dd><ul class="first last simple">
<li>the desired resolution.</li>
</ul>
</dd>
<dt>interp:</dt>
<dd><ul class="first last simple">
<li>the interpolation strategy to use.</li>
</ul>
</dd>
</dl>
</div></blockquote>
</dd></dl>

<dl class="function">
<dt id="utils.reg_utils.segment_t1w">
<code class="descclassname">utils.reg_utils.</code><code class="descname">segment_t1w</code><span class="sig-paren">(</span><em>t1w</em>, <em>basename</em>, <em>opts=''</em><span class="sig-paren">)</span><a class="headerlink" href="#utils.reg_utils.segment_t1w" title="Permalink to this definition">¶</a></dt>
<dd><p>Uses FSLs FAST to segment an anatomical image into GM, WM, and CSF probability maps.</p>
<dl class="docutils">
<dt>t1w <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd>the path to the t1w image to be segmented</dd>
<dt>basename <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd>the basename for outputs. Often it will be most convenient for this to be the dataset, followed by the subject,
followed by the step of processing. Note that this anticipates a path as well;
ie, /path/to/dataset_sub_nuis, with no extension.</dd>
<dt>opts <span class="classifier-delimiter">:</span> <span class="classifier">str, optional</span></dt>
<dd>additional options that can optionally be passed to fast. Desirable options might be -P, which will use
prior probability maps if the input T1w MRI is in standard space, by default “”</dd>
</dl>
<dl class="docutils">
<dt>dict</dt>
<dd>dictionary of output files</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="utils.reg_utils.t1w_skullstrip">
<code class="descclassname">utils.reg_utils.</code><code class="descname">t1w_skullstrip</code><span class="sig-paren">(</span><em>t1w</em>, <em>out</em><span class="sig-paren">)</span><a class="headerlink" href="#utils.reg_utils.t1w_skullstrip" title="Permalink to this definition">¶</a></dt>
<dd><p>Skull-strips the t1w image using AFNIs 3dSkullStrip algorithm, which is a modification of FSLs BET specialized to t1w images.
Offers robust skull-stripping with no hyperparameters
Note: renormalizes the intensities, call extract_t1w_brain instead if you want the original intensity values</p>
<dl class="docutils">
<dt>t1w <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd>the input t1w image file</dd>
<dt>out <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd>the output skull-stripped image file</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="utils.reg_utils.wm_syn">
<code class="descclassname">utils.reg_utils.</code><code class="descname">wm_syn</code><span class="sig-paren">(</span><em>template_path</em>, <em>fa_path</em>, <em>working_dir</em><span class="sig-paren">)</span><a class="headerlink" href="#utils.reg_utils.wm_syn" title="Permalink to this definition">¶</a></dt>
<dd><p>A function to perform ANTS SyN registration using dipy functions</p>
<dl class="docutils">
<dt>template_path <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd>File path to the template reference FA image.</dd>
<dt>fa_path <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd>File path to the FA moving image (image to be fitted to reference)</dd>
<dt>working_dir <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd>Path to the working directory to perform SyN and save outputs.</dd>
</dl>
<dl class="docutils">
<dt>DiffeomorphicMap</dt>
<dd>An object that can be used to register images back and forth between static (template) and moving (FA) domains</dd>
<dt>AffineMap</dt>
<dd>An object used to transform the moving (FA) image towards the static image (template)</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-preproc.rescale_bvec">
<span id="rescale-bvec"></span><h2><a class="toc-backref" href="#id25">rescale_bvec</a><a class="headerlink" href="#module-preproc.rescale_bvec" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="preproc.rescale_bvec.rescale_bvec">
<code class="descclassname">preproc.rescale_bvec.</code><code class="descname">rescale_bvec</code><span class="sig-paren">(</span><em>bvec</em>, <em>bvec_new</em><span class="sig-paren">)</span><a class="headerlink" href="#preproc.rescale_bvec.rescale_bvec" title="Permalink to this definition">¶</a></dt>
<dd><p>Normalizes b-vectors to be of unit length for the non-zero b-values. If the b-value is 0, the vector is untouched</p>
<dl class="docutils">
<dt>bvec <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd>Path to the original b-vectors file (bvec)</dd>
<dt>bvec_new <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd>Path to the new (normalized) b-vectors file. Must have extension ‘.bvec’</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-utils.s3_utils">
<span id="s3-utils"></span><h2><a class="toc-backref" href="#id26">s3_utils</a><a class="headerlink" href="#module-utils.s3_utils" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="utils.s3_utils.get_matching_s3_objects">
<code class="descclassname">utils.s3_utils.</code><code class="descname">get_matching_s3_objects</code><span class="sig-paren">(</span><em>bucket</em>, <em>prefix=''</em>, <em>suffix=''</em><span class="sig-paren">)</span><a class="headerlink" href="#utils.s3_utils.get_matching_s3_objects" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate objects in an S3 bucket.</p>
<dl class="docutils">
<dt>bucket <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd>Name of the s3 bucket.</dd>
<dt>prefix <span class="classifier-delimiter">:</span> <span class="classifier">str, optional</span></dt>
<dd>Only fetch objects whose key starts with this prefix, by default ‘’</dd>
<dt>suffix <span class="classifier-delimiter">:</span> <span class="classifier">str, optional</span></dt>
<dd>Only fetch objects whose keys end with this suffix, by default ‘’</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="utils.s3_utils.s3_client">
<code class="descclassname">utils.s3_utils.</code><code class="descname">s3_client</code><span class="sig-paren">(</span><em>service='s3'</em><span class="sig-paren">)</span><a class="headerlink" href="#utils.s3_utils.s3_client" title="Permalink to this definition">¶</a></dt>
<dd><p>create an s3 client.</p>
<dl class="docutils">
<dt>service <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd>Type of service.</dd>
</dl>
<dl class="docutils">
<dt>boto3.client</dt>
<dd>client with proper credentials.</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="utils.s3_utils.s3_get_data">
<code class="descclassname">utils.s3_utils.</code><code class="descname">s3_get_data</code><span class="sig-paren">(</span><em>bucket</em>, <em>remote</em>, <em>local</em>, <em>public=False</em>, <em>force=False</em><span class="sig-paren">)</span><a class="headerlink" href="#utils.s3_utils.s3_get_data" title="Permalink to this definition">¶</a></dt>
<dd><p>given an s3 directory,
copies in that directory to local.</p>
</dd></dl>

<div class="toctree-wrapper compound">
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../pipeline/diffusion.html" class="btn btn-neutral float-right" title="Diffusion Pipeline" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="install.html" class="btn btn-neutral float-left" title="Install" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, Gregory Kiar, Eric Bridgeford

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>